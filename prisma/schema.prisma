// schema.prisma

// Define the datasource for MongoDB
datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL") // Set your MongoDB connection string in the .env file
}

// Define the generator for Prisma Client
generator client {
  provider = "prisma-client-js"
}

// Auth model
model Auth {
  id                String   @id @default(cuid()) @map("_id") @db.ObjectId
  name              String
  email             String   @unique
  mobile            String   @unique
  username          String   @unique
  password          String
  is_verified       Boolean  @default(false)
  verification_code String   @default("")
  created_at        DateTime @default(now())
  updated_at        DateTime @updatedAt
  profile           Profile?
}

// Profile model
model Profile {
  id                  String                @id @default(cuid()) @map("_id") @db.ObjectId
  auth_id             String                @unique @db.ObjectId
  Auth                Auth                  @relation(fields: [auth_id], references: [id])
  current_address     String?  @default("")
  permanent_address   String?  @default("")
  designation         String?  @default("")
  summary             String?  @default("")
  language            String[]  @default([])
  is_experience       Boolean @default(false)
  linkedin            String?  @default("")
  github              String?  @default("")
  portfolio_url       String?  @default("")
  experiences         Experience[]
  projects            Project[]
  educations          Education[]
  skills              Skill[]
  references          Reference[]
  internships         InternApprenticeship[]
  created_at           DateTime @default(now())
  updated_at           DateTime @updatedAt
}

// Experience model
model Experience {
  id          String   @id @default(cuid()) @map("_id")
  company_name String
  profile     Profile  @relation(fields: [profile_id], references: [id])
  profile_id   String   @db.ObjectId
  from_date   DateTime  @default(now())
  to_date     DateTime? 
  description String?   @default("")
  role        String    
  created_at   DateTime @default(now())
  updated_at   DateTime @updatedAt
}

// Project model
model Project {
  id          String   @id @default(cuid()) @map("_id")
  name        String   
  role        String   
  description String?  @default("")
  from_date   DateTime  
  to_date     DateTime?
  profile     Profile  @relation(fields: [profile_id], references: [id])
  profile_id   String   @db.ObjectId
  created_at   DateTime @default(now())
  updated_at   DateTime @updatedAt
}

// Education model
model Education {
  id          String   @id @default(cuid()) @map("_id")
  name        String
  from_date   DateTime
  to_date     DateTime
  college_name String
  profile     Profile  @relation(fields: [profile_id], references: [id])
  profile_id   String   @db.ObjectId
  created_at   DateTime @default(now())
  updated_at   DateTime @updatedAt
}

// Skill model
model Skill {
  id                String   @id @default(cuid()) @map("_id")
  front_end         String[]?  @default([])
  back_end          String[]?  @default([])
  database_end      String[]?  @default([])
  version_control    String[]? @default([])
  project_management String[]? @default([])
  other             String[]?  @default([])
  description       String?    @default("")
  profile_id         String   @db.ObjectId
  profile           Profile  @relation(fields: [profile_id], references: [id])
  created_at         DateTime @default(now())
  updated_at         DateTime @updatedAt
}

// Reference model
model Reference {
  id        String   @id @default(cuid())  @map("_id")
  profile   Profile  @relation(fields: [profile_id], references: [id])
  profile_id String   @db.ObjectId
  name      String
  role      String
  email     String
  phone     String
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt
}

// InternApprenticeship model
model InternApprenticeship {
  id          String   @id @default(cuid())   @map("_id")
  profile_id   String   @db.ObjectId
  profile     Profile  @relation(fields: [profile_id], references: [id])
  company_name String
  role        String
  from_date   DateTime
  to_date     DateTime
  description  String? @default("")
  created_at   DateTime @default(now())
  updated_at   DateTime @updatedAt
}