// schema.prisma

// Define the datasource for MongoDB
datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL") // Set your MongoDB connection string in the .env file
}

// Define the generator for Prisma Client
generator client {
  provider = "prisma-client-js"
}

// Auth model
model Auth {
  id                String   @id @default(cuid()) @map("_id")
  name              String
  email             String   @unique
  mobile            String   @unique
  username          String   @unique
  password          String
  is_verified       Boolean  @default(false)
  verification_code String?
  created_at         DateTime @default(now())
  updated_at         DateTime @updatedAt
  profile           Profile?
}

// Profile model
model Profile {
  id                  String                @id @default(cuid()) @map("_id")
  auth_id              String                @unique
  Auth                Auth                 @relation(fields: [auth_id], references: [id])
  current_address     String?
  permanent_address   String?
  designation         String?
  summary             String?
  language            String?
  is_experience       Boolean?
  linkedin            String?
  github              String?
  portfolio_url       String?
  experiences         Experience[]
  projects            Project[]
  educations          Education[]
  skills              Skill[]
  references          Reference[]
  internships         InternApprenticeship[]
  created_at           DateTime @default(now())
  updated_at           DateTime @updatedAt
}

// Experience model
model Experience {
  id          String   @id @default(cuid()) @map("_id")
  company_name String
  profile     Profile  @relation(fields: [profile_id], references: [id])
  profile_id   String   @db.ObjectId
  from_date   DateTime
  to_date     DateTime?
  description String?
  role        String
  created_at   DateTime @default(now())
  updated_at   DateTime @updatedAt
}

// Project model
model Project {
  id          String   @id @default(cuid()) @map("_id")
  name        String
  role        String
  description String?
  from_date   DateTime
  to_date     DateTime?
  profile     Profile  @relation(fields: [profile_id], references: [id])
  profile_id   String   @db.ObjectId
  created_at   DateTime @default(now())
  updated_at   DateTime @updatedAt
}

// Education model
model Education {
  id          String   @id @default(cuid()) @map("_id")
  name        String
  from_date   DateTime
  to_date     DateTime
  college_name String
  profile     Profile  @relation(fields: [profile_id], references: [id])
  profile_id   String   @db.ObjectId
  created_at   DateTime @default(now())
  updated_at   DateTime @updatedAt
}

// Skill model
model Skill {
  id                String   @id @default(cuid()) @map("_id")
  front_end         String
  back_end          String
  database_end      String
  version_control    String
  project_management String
  other             String?
  description       String
  profile           Profile  @relation(fields: [profile_id], references: [id])
  profile_id         String   @db.ObjectId
  created_at         DateTime @default(now())
  updated_at         DateTime @updatedAt
}

// Reference model
model Reference {
  id        String   @id @default(cuid())  @map("_id")
  profile   Profile  @relation(fields: [profile_id], references: [id])
  profile_id String   @db.ObjectId
  name      String
  role      String
  email     String
  phone     String
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt
}

// InternApprenticeship model
model InternApprenticeship {
  id          String   @id @default(cuid())   @map("_id")
  profile     Profile  @relation(fields: [profile_id], references: [id])
  profile_id   String   @db.ObjectId
  company_name String
  role        String
  from_date   DateTime
  to_date     DateTime
  description String
  created_at   DateTime @default(now())
  updated_at   DateTime @updatedAt
}