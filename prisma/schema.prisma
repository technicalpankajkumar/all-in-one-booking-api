// schema.prisma

// Define the datasource for MongoDB
datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL") // Set your MongoDB connection string in the .env file
}

// Define the generator for Prisma Client
generator client {
  provider = "prisma-client-js"
}

// Auth model
model Auth {
  id                String   @id @default(cuid())
  name              String
  email             String   @unique
  mobile            String   @unique
  username          String   @unique
  password          String
  is_verified       Boolean  @default(false)
  verification_code String?
  profile           Profile? @relation(fields: [profileId], references: [id])
  profileId         String?  @db.ObjectId
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
}

// Profile model
model Profile {
  id                  String                @id @default(cuid())
  user                Auth                  @relation(fields: [userId], references: [id])
  userId             String                @db.ObjectId
  current_address     String?
  permanent_address   String?
  designation         String?
  summary             String?
  language            String?
  is_experience       Boolean?
  linkedin            String?
  github              String?
  portfolio_url       String?
  experiences         Experience[]
  projects            Project[]
  educations          Education[]
  skills              Skill[]
  references          Reference[]
  internships         InternApprenticeship[]
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt
}

// Experience model
model Experience {
  id          String   @id @default(cuid())
  company_name String
  profile     Profile  @relation(fields: [profileId], references: [id])
  profileId   String   @db.ObjectId
  from_date   DateTime
  to_date     DateTime?
  description String?
  role        String
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

// Project model
model Project {
  id          String   @id @default(cuid())
  name        String
  role        String
  description String?
  from_date   DateTime
  to_date     DateTime?
  profile     Profile  @relation(fields: [profileId], references: [id])
  profileId   String   @db.ObjectId
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

// Education model
model Education {
  id          String   @id @default(cuid())
  name        String
  from_date   DateTime
  to_date     DateTime
  college_name String
  profile     Profile  @relation(fields: [profileId], references: [id])
  profileId   String   @db.ObjectId
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

// Skill model
model Skill {
  id                String   @id @default(cuid())
  front_end         String
  back_end          String
  database_end      String
  version_control    String
  project_management String
  other             String?
  description       String
  profile           Profile  @relation(fields: [profileId], references: [id])
  profileId         String   @db.ObjectId
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
}

// Reference model
model Reference {
  id        String   @id @default(cuid())
  profile   Profile  @relation(fields: [profileId], references: [id])
  profileId String   @db.ObjectId
  name      String
  role      String
  email     String
  phone     String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

// InternApprenticeship model
model InternApprenticeship {
  id          String   @id @default(cuid())
  profile     Profile  @relation(fields: [profileId], references: [id])
  profileId   String   @db.ObjectId
  company_name String
  role        String
  from_date   DateTime
  to_date     DateTime
  description String
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}